var kirkiPostMessage={fields:{},styleTag:{add:function(a){(null===document.getElementById('kirki-postmessage-'+a)||'undefined'==typeof document.getElementById('kirki-postmessage-'+a))&&jQuery('head').append('<style id="kirki-postmessage-'+a+'"></style>')},addData:function(a,b){kirkiPostMessage.styleTag.add(a),jQuery('#kirki-postmessage-'+a).text(b)}},util:{processValue:function(a,b){var e=this,c=window.parent.wp.customize.get(),d=!1;return'object'==typeof b?(_.each(b,function(c,d){b[d]=e.processValue(a,c)}),b):!(a=_.defaults(a,{prefix:'',units:'',suffix:'',value_pattern:'$',pattern_replace:{},exclude:[]}),1<=a.exclude.length&&_.each(a.exclude,function(a){b==a&&(d=!0)}),d)&&(b=a.value_pattern.replace(new RegExp('\\$','g'),b),_.each(a.pattern_replace,function(a,d){_.isUndefined(c[a])||(b=b.replace(d,c[a]))}),a.prefix+b+a.units+a.suffix)},backgroundImageValue:function(a){return-1===a.indexOf('url(')?'url('+a+')':a}},css:{fromOutput:function(a,b,g){var c='',h=window.parent.kirki,e='',f=!1,d;switch(a.js_callback&&'function'==typeof window[a.js_callback]&&(b=window[a.js_callback[0]](b,a.js_callback[1])),g){case'kirki-typography':c+=a.element+'{',_.each(b,function(e,b){if(a.choice&&b!==a.choice)return;d=kirkiPostMessage.util.processValue(a,e),!1!==d&&(c+=b+':'+d+';')}),c+='}',!_.isUndefined(WebFont)&&b['font-family']&&'google'===h.util.webfonts.getFontType(b['font-family'])&&(e=b['font-family'].replace(/\"/g,'&quot;'),b.variant&&('regular'===b.variant?e+=':400':'italic'===b.variant?e+=':400i':e+=':'+b.variant),e+=':cyrillic,cyrillic-ext,devanagari,greek,greek-ext,khmer,latin,latin-ext,vietnamese,hebrew,arabic,bengali,gujarati,tamil,telugu,thai',WebFont.load({google:{families:[e]}}));break;case'kirki-background':case'kirki-dimensions':case'kirki-multicolor':case'kirki-sortable':c+=a.element+'{',_.each(b,function(e,b){if(a.choice&&b!==a.choice)return;'background-image'===b&&(e=kirkiPostMessage.util.backgroundImageValue(e)),d=kirkiPostMessage.util.processValue(a,e),!1!==d&&(a.property?(c+=a.property,''!==a.property&&('top'===b||'bottom'===b||'left'===b||'right'===b)&&(c+='-'+b),c+=':'+d+';'):c+=b+':'+d+';')}),c+='}';break;default:'kirki-image'===g&&(b=!_.isUndefined(b.url)?kirkiPostMessage.util.backgroundImageValue(b.url):kirkiPostMessage.util.backgroundImageValue(b)),_.isObject(b)?(c+=a.element+'{',_.each(b,function(e,b){if(a.choice&&b!==a.choice)return;d=kirkiPostMessage.util.processValue(a,e),a.property||(a.property=b),!1!==d&&(c+=a.property+':'+d+';')}),c+='}'):(d=kirkiPostMessage.util.processValue(a,b),!1!==d&&(c+=a.element+'{'+a.property+':'+d+';}'));break}return a.media_query&&'string'==typeof a.media_query&&!_.isEmpty(a.media_query)&&(f=a.media_query,-1===f.indexOf('@media')&&(f='@media '+f)),f?f+'{'+c+'}':c}},html:{fromOutput:function(a,b){if(a.js_callback&&'function'==typeof window[a.js_callback]&&(b=window[a.js_callback[0]](b,a.js_callback[1])),_.isObject(b)||_.isArray(b)){if(!a.choice)return;_.each(b,function(c,d){if(a.choice&&d!==a.choice)return;b=c})}b=kirkiPostMessage.util.processValue(a,b),a.attr?jQuery(a.element).attr(a.attr,b):jQuery(a.element).html(b)}},toggleClass:{fromOutput:function(a,b){if('undefined'==typeof a.class||'undefined'==typeof a.value)return;b===a.value&&!jQuery(a.element).hasClass(a.class)?jQuery(a.element).addClass(a.class):jQuery(a.element).removeClass(a.class)}}};jQuery(document).ready(function(){_.each(kirkiPostMessageFields,function(a){wp.customize(a.settings,function(b){b.bind(function(b){var c='';_.each(a.js_vars,function(d){(!d.function||'undefined'==typeof kirkiPostMessage[d.function])&&(d.function='css'),'css'===d.function?c+=kirkiPostMessage.css.fromOutput(d,b,a.type):kirkiPostMessage[d.function].fromOutput(d,b,a.type)}),kirkiPostMessage.styleTag.addData(a.settings,c)})})})})