!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports&&"function"==typeof require?a(require("jquery")):a(jQuery)}(function(a){"use strict";var f={escapeRegExChars:function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(b){var a=document.createElement("div");return a.className=b,a.style.position="absolute",a.style.display="none",a}},i=27,j=9,g=13,e=38,h=39,c=40,d=a.noop;function b(c,d){this.element=c,this.el=a(c),this.suggestions=[],this.badQueries=[],this.selectedIndex=-1,this.currentValue=this.element.value,this.timeoutId=null,this.cachedResponse={},this.onChangeTimeout=null,this.onChange=null,this.isLocal=!1,this.suggestionsContainer=null,this.noSuggestionsContainer=null,this.options=a.extend(!0,{},b.defaults,d),this.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},this.hint=null,this.hintValue="",this.selection=null,this.initialize(),this.setOptions(d)}b.utils=f,a.Autocomplete=b,b.defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,onHint:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:function(a,b){if(!b)return a.value;var c="("+f.escapeRegExChars(b)+")";return a.value.replace(new RegExp(c,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},formatGroup:function(b,a){return'<div class="autocomplete-group">'+a+"</div>"},delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:d,onSearchComplete:d,onSearchError:d,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(a,c,b){return-1!==a.value.toLowerCase().indexOf(b)},paramName:"query",transformResult:function(b){return"string"==typeof b?a.parseJSON(b):b},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1},b.prototype={initialize:function(){var d,c=this,f="."+c.classes.suggestion,g=c.classes.selected,e=c.options;c.element.setAttribute("autocomplete","off"),c.noSuggestionsContainer=a('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),c.suggestionsContainer=b.utils.createNode(e.containerClass),(d=a(c.suggestionsContainer)).appendTo(e.appendTo||"body"),"auto"!==e.width&&d.css("width",e.width),d.on("mouseover.autocomplete",f,function(){c.activate(a(this).data("index"))}),d.on("mouseout.autocomplete",function(){c.selectedIndex=-1,d.children("."+g).removeClass(g)}),d.on("click.autocomplete",f,function(){c.select(a(this).data("index"))}),d.on("click.autocomplete",function(){clearTimeout(c.blurTimeoutId)}),c.fixPositionCapture=function(){c.visible&&c.fixPosition()},a(window).on("resize.autocomplete",c.fixPositionCapture),c.el.on("keydown.autocomplete",function(a){c.onKeyPress(a)}),c.el.on("keyup.autocomplete",function(a){c.onKeyUp(a)}),c.el.on("blur.autocomplete",function(){c.onBlur()}),c.el.on("focus.autocomplete",function(){c.onFocus()}),c.el.on("change.autocomplete",function(a){c.onKeyUp(a)}),c.el.on("input.autocomplete",function(a){c.onKeyUp(a)})},onFocus:function(){this.disabled||(this.fixPosition(),this.el.val().length>=this.options.minChars&&this.onValueChange())},onBlur:function(){var b=this,c=b.options,d=b.el.val(),e=b.getQuery(d);b.blurTimeoutId=setTimeout(function(){b.hide(),b.selection&&b.currentValue!==e&&(c.onInvalidateSelection||a.noop).call(b.element)},200)},abortAjax:function(){this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null)},setOptions:function(c){var b=a.extend({},this.options,c);this.isLocal=Array.isArray(b.lookup),this.isLocal&&(b.lookup=this.verifySuggestionsFormat(b.lookup)),b.orientation=this.validateOrientation(b.orientation,"bottom"),a(this.suggestionsContainer).css({"max-height":b.maxHeight+"px",width:b.width+"px","z-index":b.zIndex}),this.options=b},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,clearTimeout(this.onChangeTimeout),this.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var b=a(this.suggestionsContainer),g=b.parent().get(0),e,f,i,d,c,l,j,k,m,h,n;(g===document.body||this.options.forceFixPosition)&&(e=this.options.orientation,f=b.outerHeight(),i=this.el.outerHeight(),d=this.el.offset(),c={top:d.top,left:d.left},"auto"===e&&(l=a(window).height(),j=a(window).scrollTop(),k=-j+d.top-f,m=j+l-(d.top+i+f),e=Math.max(k,m)===k?"top":"bottom"),(c.top+="top"===e?-f:i,g!==document.body)&&(n=b.css("opacity"),this.visible||b.css("opacity",0).show(),h=b.offsetParent().offset(),c.top-=h.top,c.top+=g.scrollTop,c.left-=h.left,this.visible||b.css("opacity",n).hide()),"auto"===this.options.width&&(c.width=this.el.outerWidth()+"px"),b.css(c))},isCursorAtEnd:function(){var b,a=this.el.val().length,c=this.element.selectionStart;return"number"==typeof c?c===a:!document.selection||((b=document.selection.createRange()).moveStart("character",-a),a===b.text.length)},onKeyPress:function(a){if(this.disabled||this.visible||a.which!==c||!this.currentValue){if(!this.disabled&&this.visible){switch(a.which){case i:this.el.val(this.currentValue),this.hide();break;case h:if(this.hint&&this.options.onHint&&this.isCursorAtEnd()){this.selectHint();break}return;case j:if(this.hint&&this.options.onHint)return void this.selectHint();if(-1===this.selectedIndex)return void this.hide();if(this.select(this.selectedIndex),!1===this.options.tabDisabled)return;break;case g:if(-1===this.selectedIndex)return void this.hide();this.select(this.selectedIndex);break;case e:this.moveUp();break;case c:this.moveDown();break;default:return}a.stopImmediatePropagation(),a.preventDefault()}}else this.suggest()},onKeyUp:function(b){var a=this;if(!a.disabled){switch(b.which){case e:case c:return}clearTimeout(a.onChangeTimeout),a.currentValue!==a.el.val()&&(a.findBestHint(),a.options.deferRequestBy>0?a.onChangeTimeout=setTimeout(function(){a.onValueChange()},a.options.deferRequestBy):a.onValueChange())}},onValueChange:function(){if(this.ignoreValueChange)this.ignoreValueChange=!1;else{var c=this.options,d=this.el.val(),b=this.getQuery(d);this.selection&&this.currentValue!==b&&(this.selection=null,(c.onInvalidateSelection||a.noop).call(this.element)),clearTimeout(this.onChangeTimeout),this.currentValue=d,this.selectedIndex=-1,c.triggerSelectOnValidInput&&this.isExactMatch(b)?this.select(0):b.length<c.minChars?this.hide():this.getSuggestions(b)}},isExactMatch:function(b){var a=this.suggestions;return 1===a.length&&a[0].value.toLowerCase()===b.toLowerCase()},getQuery:function(c){var b,d=this.options.delimiter;return d?(b=c.split(d),a.trim(b[b.length-1])):c},getSuggestionsLocal:function(e){var b,c=this.options,f=e.toLowerCase(),g=c.lookupFilter,d=parseInt(c.lookupLimit,10);return b={suggestions:a.grep(c.lookup,function(a){return g(a,e,f)})},d&&b.suggestions.length>d&&(b.suggestions=b.suggestions.slice(0,d)),b},getSuggestions:function(d){var e,g,h,i,b=this,c=b.options,f=c.serviceUrl;c.params[c.paramName]=d,!1!==c.onSearchStart.call(b.element,c.params)&&(g=c.ignoreParams?null:c.params,a.isFunction(c.lookup)?c.lookup(d,function(a){b.suggestions=a.suggestions,b.suggest(),c.onSearchComplete.call(b.element,d,a.suggestions)}):(b.isLocal?e=b.getSuggestionsLocal(d):(a.isFunction(f)&&(f=f.call(b.element,d)),h=f+"?"+a.param(g||{}),e=b.cachedResponse[h]),e&&Array.isArray(e.suggestions)?(b.suggestions=e.suggestions,b.suggest(),c.onSearchComplete.call(b.element,d,e.suggestions)):b.isBadQuery(d)?c.onSearchComplete.call(b.element,d,[]):(b.abortAjax(),i={url:f,data:g,type:c.type,dataType:c.dataType},a.extend(i,c.ajaxSettings),b.currentRequest=a.ajax(i).done(function(e){var a;b.currentRequest=null,a=c.transformResult(e,d),b.processResponse(a,d,h),c.onSearchComplete.call(b.element,d,a.suggestions)}).fail(function(a,e,f){c.onSearchError.call(b.element,d,a,e,f)}))))},isBadQuery:function(c){if(!this.options.preventBadQueries)return!1;for(var a=this.badQueries,b=a.length;b--;)if(0===c.indexOf(a[b]))return!0;return!1},hide:function(){var b=a(this.suggestionsContainer);a.isFunction(this.options.onHide)&&this.visible&&this.options.onHide.call(this.element,b),this.visible=!1,this.selectedIndex=-1,clearTimeout(this.onChangeTimeout),a(this.suggestionsContainer).hide(),this.onHint(null)},suggest:function(){if(this.suggestions.length){var d,b=this.options,f=b.groupBy,l=b.formatResult,i=this.getQuery(this.currentValue),h=this.classes.suggestion,j=this.classes.selected,c=a(this.suggestionsContainer),k=a(this.noSuggestionsContainer),g=b.beforeRender,e="";b.triggerSelectOnValidInput&&this.isExactMatch(i)?this.select(0):(a.each(this.suggestions,function(a,c){f&&(e+=function(a,e){var c=a.data[f];return d===c?"":(d=c,b.formatGroup(a,d))}(c,0)),e+='<div class="'+h+'" data-index="'+a+'">'+l(c,i,a)+"</div>"}),this.adjustContainerWidth(),k.detach(),c.html(e),a.isFunction(g)&&g.call(this.element,c,this.suggestions),this.fixPosition(),c.show(),b.autoSelectFirst&&(this.selectedIndex=0,c.scrollTop(0),c.children("."+h).first().addClass(j)),this.visible=!0,this.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var c=this.options.beforeRender,b=a(this.suggestionsContainer),d=a(this.noSuggestionsContainer);this.adjustContainerWidth(),d.detach(),b.empty(),b.append(d),a.isFunction(c)&&c.call(this.element,b,this.suggestions),this.fixPosition(),b.show(),this.visible=!0},adjustContainerWidth:function(){var b,c=this.options,d=a(this.suggestionsContainer);"auto"===c.width?(b=this.el.outerWidth(),d.css("width",b>0?b:300)):"flex"===c.width&&d.css("width","")},findBestHint:function(){var b=this.el.val().toLowerCase(),c=null;b&&(a.each(this.suggestions,function(e,a){var d=0===a.value.toLowerCase().indexOf(b);return d&&(c=a),!d}),this.onHint(c))},onHint:function(c){var d=this.options.onHint,b="";c&&(b=this.currentValue+c.value.substr(this.currentValue.length)),this.hintValue!==b&&(this.hintValue=b,this.hint=c,a.isFunction(d)&&d.call(this.element,b))},verifySuggestionsFormat:function(b){return b.length&&"string"==typeof b[0]?a.map(b,function(a){return{value:a,data:null}}):b},validateOrientation:function(b,c){return b=a.trim(b||"").toLowerCase(),-1===a.inArray(b,["auto","bottom","top"])&&(b=c),b},processResponse:function(a,b,d){var c=this.options;a.suggestions=this.verifySuggestionsFormat(a.suggestions),c.noCache||(this.cachedResponse[d]=a,c.preventBadQueries&&!a.suggestions.length&&this.badQueries.push(b)),b===this.getQuery(this.currentValue)&&(this.suggestions=a.suggestions,this.suggest())},activate:function(f){var b,c=this.classes.selected,d=a(this.suggestionsContainer),e=d.find("."+this.classes.suggestion);return d.find("."+c).removeClass(c),this.selectedIndex=f,-1!==this.selectedIndex&&e.length>this.selectedIndex?(b=e.get(this.selectedIndex),a(b).addClass(c),b):null},selectHint:function(){var b=a.inArray(this.hint,this.suggestions);this.select(b)},select:function(a){this.hide(),this.onSelect(a)},moveUp:function(){if(-1!==this.selectedIndex)return 0===this.selectedIndex?(a(this.suggestionsContainer).children("."+this.classes.suggestion).first().removeClass(this.classes.selected),this.selectedIndex=-1,this.ignoreValueChange=!1,this.el.val(this.currentValue),void this.findBestHint()):void this.adjustScroll(this.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(d){var c=this.activate(d),b,e,f,g;c&&(g=a(c).outerHeight(),b=c.offsetTop,f=(e=a(this.suggestionsContainer).scrollTop())+this.options.maxHeight-g,b<e?a(this.suggestionsContainer).scrollTop(b):b>f&&a(this.suggestionsContainer).scrollTop(b-this.options.maxHeight+g),this.options.preserveInput||(this.ignoreValueChange=!0,this.el.val(this.getValue(this.suggestions[d].value))),this.onHint(null))},onSelect:function(d){var c=this.options.onSelect,b=this.suggestions[d];this.currentValue=this.getValue(b.value),this.currentValue===this.el.val()||this.options.preserveInput||this.el.val(this.currentValue),this.onHint(null),this.suggestions=[],this.selection=b,a.isFunction(c)&&c.call(this.element,b)},getValue:function(a){var b,c,d=this.options.delimiter;return d?1===(c=(b=this.currentValue).split(d)).length?a:b.substr(0,b.length-c[c.length-1].length)+a:a},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),a(window).off("resize.autocomplete",this.fixPositionCapture),a(this.suggestionsContainer).remove()}},a.fn.devbridgeAutocomplete=function(c,d){return arguments.length?this.each(function(){var f=a(this),e=f.data("autocomplete");"string"==typeof c?e&&"function"==typeof e[c]&&e[c](d):(e&&e.dispose&&e.dispose(),e=new b(this,c),f.data("autocomplete",e))}):this.first().data("autocomplete")},a.fn.autocomplete||(a.fn.autocomplete=a.fn.devbridgeAutocomplete)}),jQuery(document).ready(function(a){"use strict";a('.searchform').each(function(){var e=a(this).find('.live-search-results'),b=a(this).find('.search_categories'),d=flatsomeVars.ajaxurl+'?action=flatsome_ajax_search_products',f='',c;b.length&&b.val()!==''&&(d+='&product_cat='+b.val()),a(this).find('.search-field').devbridgeAutocomplete({minChars:3,appendTo:e,triggerSelectOnValidInput:!1,serviceUrl:d,deferRequestBy:parseInt(flatsomeVars.options.search_result_latency),onSearchStart:function(){a('.submit-button').removeClass('loading'),a('.submit-button').addClass('loading')},onSelect:function(a){a.id!=-1&&(window.location.href=a.url)},onSearchComplete:function(){a('.submit-button').removeClass('loading')},beforeRender:function(b){a(b).removeAttr('style')},formatResult:function(b,d){var e='('+a.Autocomplete.utils.escapeRegExChars(d)+')',c='';return b.img&&(c+='<img class="search-image" src="'+b.img+'">'),c+='<div class="search-name">'+b.value.replace(new RegExp(e,'gi'),'<strong>$1</strong>')+'</div>',b.price&&(c+='<span class="search-price">'+b.price+'<span>'),c}}),b.length&&(c=a(this).find('.search-field').devbridgeAutocomplete(),b.on('change',function(a){b.val()!=''?c.setOptions({serviceUrl:flatsomeVars.ajaxurl+'?action=flatsome_ajax_search_products&product_cat='+b.val()}):c.setOptions({serviceUrl:flatsomeVars.ajaxurl+'?action=flatsome_ajax_search_products'}),c.hide(),c.onValueChange()}))})})