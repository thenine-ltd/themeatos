/*! For license information please see wptelegram-pro--p2tg-gb.34e60e30.js.LICENSE.txt */
!function(){"use strict";var e={1725:function(e){var n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(e){return n[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,l,s=i(e),c=1;c<arguments.length;c++){for(var u in o=Object(arguments[c]))t.call(o,u)&&(s[u]=o[u]);if(n){l=n(o);for(var d=0;d<l.length;d++)r.call(o,l[d])&&(s[l[d]]=o[l[d]])}}return s}},6374:function(e,n,t){t(1725);var r=t(9196),i=60103;if(n.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),n.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,t){var r,a={},c=null,u=null;for(r in void 0!==t&&(c=""+t),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)l.call(n,r)&&!s.hasOwnProperty(r)&&(a[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===a[r]&&(a[r]=n[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:o.current}}n.jsx=c,n.jsxs=c},184:function(e,n,t){e.exports=t(6374)},9196:function(e){e.exports=window.React}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,t),a.exports}!function(){var e=window.wp.plugins,n=window.wp.i18n,r="",i=n.createI18n,a=(null===i||void 0===i?void 0:i())||n,o=function(e){return a.__(e,r)},l=window.wp.element,s=window.wp.editPost,c=window.wp.components;function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function d(e,n){if(e){if("string"===typeof e)return u(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,n):void 0}}function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||d(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){g(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function v(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h,j,w=t(184),y=(0,l.createContext)(null),x=y.Provider,_=(y.Consumer,function(e){var n=e.children,t=e.getInstance,r=e.updateInstance,i=(0,l.useMemo)((function(){return{getInstance:t,updateInstance:r}}),[t,r]);return(0,w.jsx)(x,{value:i,children:n})}),O=function(e){return(0,(0,l.useContext)(y).getInstance)(e)},S=function(){return(0,l.useContext)(y).updateInstance},C=(null===(h=window.wptelegram_pro)||void 0===h||null===(j=h.uiData)||void 0===j?void 0:j.instances)||{},P=function(e){var n,t,r=e.id,i=e.isDisabled,a=e.data,s=S(),u=(0,l.useCallback)((function(e){return function(){var n=-1!==a.channels.indexOf(e)?a.channels.filter((function(n){return n!==e})):[].concat(v(a.channels),[e]);s(r,"channels")(n)}}),[a.channels,r,s]);return(0,w.jsx)(c.BaseControl,{id:"wptgpro-send-to-".concat(r,"-base"),label:o("Send to"),children:(0,w.jsx)("div",{role:"group",id:"wptgpro-send-to-".concat(r),"aria-label":o("Send to"),children:null===(n=C[r])||void 0===n||null===(t=n.channels)||void 0===t?void 0:t.map((function(e,n){return(0,w.jsx)(c.CheckboxControl,{label:e,disabled:i,checked:-1!==a.channels.indexOf(e),onChange:u(e)},e+n)}))})})};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function k(e){var n=function(e,n){if("object"!==D(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===D(n)?n:String(n)}var I,T,E,N,F,A,B,R=window.wp.mediaUtils,L=function(e){var n=e.open;return(0,w.jsx)(c.Button,{isSecondary:!0,onClick:n,id:"wptgpro-upload-media",children:o("Add or Upload Files")})},M=[],U=function(e){var n=e.id,t=e.isDisabled,r=e.data,i=S(),a=(0,l.useCallback)((function(e){return function(){var n=r.files,t=(n[e],p(n,[e].map(k)));i(Number(e),"files")(t)}}),[r.files,i]),s=(0,l.useCallback)((function(e){var t=e.reduce((function(e,n){var t=n.id,r=n.url;return m(m({},e),{},g({},t,r))}),{});i(n,"files")(t)}),[n,i]);return(0,w.jsx)(c.Disabled,{isDisabled:t,children:(0,w.jsxs)(c.BaseControl,{id:"wptgpro-files",label:o("Files"),help:o("Files to be sent after the message."),children:[(0,w.jsx)("br",{}),(0,w.jsx)(R.MediaUpload,{multiple:!0,onSelect:s,allowedTypes:M,render:L}),(0,w.jsx)("ul",{role:"group",id:"wptgpro-files","aria-label":o("Files"),children:Object.entries(r.files).map((function(e,n){var t=f(e,2),r=t[0],i=t[1].split("/"),o=i[i.length-1];return(0,w.jsx)("li",{children:(0,w.jsxs)(c.Flex,{justify:"flex-start",children:[(0,w.jsx)(c.Button,{icon:(0,w.jsx)(c.Icon,{icon:"no-alt"}),onClick:a(r)}),(0,w.jsx)("span",{children:o})]})},r+n)}))})]})})},z=(0,w.jsx)("div",{style:{height:"1.5em"}}),q=function(e){var n=e.id,t=e.isDisabled,r=e.data,i=O(n)||r,a=S(),l=t||!i.active;return(0,w.jsx)(w.Fragment,{children:!l&&(0,w.jsxs)(w.Fragment,{children:[z,(0,w.jsx)(P,{id:n,data:i}),z,(0,w.jsx)(U,{id:n,data:i,isDisabled:l}),z,(0,w.jsx)(c.ToggleControl,{label:o("Disable Notifications"),checked:i.disable_notification,onChange:a(n,"disable_notification")}),z,(0,w.jsx)(c.TextControl,{label:o("Delay in Posting"),value:i.delay,onChange:a(n,"delay"),step:"0.5",min:0,type:"number"}),z,(0,w.jsx)(c.ToggleControl,{label:o("Featured Image"),checked:i.send_featured_image,onChange:a(n,"send_featured_image"),help:o("Send Featured Image (if exists).")}),z,(0,w.jsx)(c.TextareaControl,{label:o("Message Template"),value:i.message_template,onChange:a(n,"message_template"),rows:10})]})})},G=window.wp.primitives,V=(0,l.createElement)(G.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)(G.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})),$=(0,l.createElement)(G.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)(G.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})),H=["isOpened","title","id","isDisabled","instanceData","onToggle"],K=function(e){var n=e.isOpened,t=e.title,r=e.id,i=e.isDisabled,a=e.instanceData,s=e.onToggle,u=p(e,H),d=O(r)||a,f=S(),g=(0,l.useCallback)((function(e){f(r,"active")(e),!e&&n&&s()}),[r,n,s,f]);return t?(0,w.jsxs)("h2",{className:"components-panel__body-title wptelegram_pro_instances__title",children:[(0,w.jsx)("label",{className:"wptelegram_pro_instances__title--label","aria-label":o("Use this instance"),children:(0,w.jsx)(c.ToggleControl,{className:"wptelegram_pro_instances__title--toggle",checked:d.active,onChange:g})}),(0,w.jsxs)(c.Button,m(m({className:"components-panel__body-toggle",disabled:i||!d.active,"aria-expanded":n,onClick:s},u),{},{children:[(0,w.jsx)("span",{"aria-hidden":"true",children:(0,w.jsx)(c.Icon,{className:"components-panel__arrow",icon:n?V:$})}),t]}))]}):null},W=["title"],Y=(null===(I=window.wptelegram_pro)||void 0===I||null===(T=I.uiData)||void 0===T?void 0:T.instances)||{},J=Object.entries(Y).sort((function(e,n){var t=f(e,2),r=t[0],i=t[1],a=f(n,2),o=a[0],l=a[1];return Number(i.menu_order)-Number(l.menu_order)||Number(o)-Number(r)})),Q=1===J.length,X=(E=function(e){var n=e.isDisabled,t=void 0!==n&&n,r=e.noHeaderIfSingle,i=void 0===r||r,a=f((0,l.useState)({}),2),s=a[0],u=a[1],d=(0,l.useCallback)((function(e){return function(){return u((function(n){return m(m({},n),{},g({},e,!n[e]))}))}}),[]),b=J.map((function(e){var n=f(e,2),r=n[0],a=n[1],o=a.title,l=p(a,W),u=(0,w.jsx)(q,{id:Number(r),isDisabled:t,data:l},r);return Q&&i?u:(0,w.jsx)(c.PanelBody,{opened:s[r],initialOpen:!1,children:function(e){var n=e.opened;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(K,{id:r,isDisabled:t,instanceData:l,isOpened:n,title:o,onToggle:d(r)}),n&&u]})}},r)}));return(0,w.jsx)(c.Disabled,{isDisabled:t,children:Q?(0,w.jsx)(w.Fragment,{children:b}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h4",{children:o("Instances")}),(0,w.jsx)(c.Panel,{children:b})]})})},function(e){return(0,w.jsx)(_,m(m({},e),{},{children:(0,w.jsx)(E,m({},e))}))}),Z=function(){return(0,w.jsx)(c.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true",focusable:"false",children:(0,w.jsx)(c.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z"})})},ee=window.wp.data,ne="_wptgpro_p2tg_",te={active:!0,channels:[],delay:"0",disable_notification:!1,message_template:"",send_featured_image:!0,files:{}},re=(null===(N=window.wptelegram_pro)||void 0===N?void 0:N.savedSettings)||{},ie=Object.entries(re.instances||{}).reduce((function(e,n){var t=f(n,2),r=t[0],i=t[1];return m(m({},e),{},g({},r,m(m({},te),i)))}),{}),ae=m(m({override_switch:!1,send2tg:!0,force_send:!1,source:"BLOCK_EDITOR"},re),{},{instances:ie}),oe=function(){var e=(0,ee.useDispatch)("core/editor").editPost,n=le().data;return(0,l.useCallback)((function(t){return function(r){var i=m(m({},n),{},g({},t,r));e(g({},ne,i),{undoIgnore:!0}),ae=i}}),[n,e])},le=function(){return(0,ee.useSelect)((function(e){var n=e("core/editor"),t=n.getEditedPostAttribute,r=n.isSavingPost,i=n.isPublishingPost,a=n.isEditedPostDirty,o=t(ne);return{data:o||ae,isDirty:a(),isSaving:r()||i(),savedData:o}}),[])},se=function(){var e=le().data,t=oe(),r=f((0,l.useState)(!1),2),i=r[0],a=r[1],s=(0,l.useCallback)((function(){return a(!0)}),[]),u=(0,l.useCallback)((function(){return a(!1)}),[]),d=(0,l.useCallback)((function(e){"wptgpro-upload-media"!==e.target.id&&u()}),[u]),p=function(){var e=le().data;return(0,l.useCallback)((function(n){return e.instances[n]}),[e.instances])}(),b=function(){var e=le().data,n=oe();return(0,l.useCallback)((function(t,r){return function(i){var a;n("instances")(m(m({},e.instances),{},g({},t,m(m({},null===(a=e.instances)||void 0===a?void 0:a[t]),{},g({},r,i)))))}}),[e.instances,n])}();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.Button,{"aria-label":o("Override settings"),disabled:!e.send2tg,icon:(0,w.jsx)(Z,{}),isSmall:!0,onClick:s}),i&&(0,w.jsx)(c.Modal,{isDismissible:!1,title:(0,n.sprintf)("%s (%s)",o("Post to Telegram"),o("Override settings")),onRequestClose:d,className:"wptelegram_pro_modal",children:(0,w.jsxs)("div",{className:"wptelegram_pro_modal__body",children:[(0,w.jsx)(c.ToggleControl,{label:o("Override settings"),checked:e.override_switch,onChange:t("override_switch")}),(0,w.jsx)(X,{isDisabled:!e.override_switch,getInstance:p,updateInstance:b}),(0,w.jsx)(c.Button,{className:"wptelegram_pro_modal__body--submit",isPrimary:!0,onClick:u,children:o("Save Changes")})]})})]})},ce={backgroundColor:"#2794da",marginInlineStart:"3px",fontSize:"70%",padding:"0px 2px",color:"#fff"},ue=function(){return(0,w.jsx)("sup",{style:ce,children:"PRO"})},de={display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"100%",marginTop:"1rem"},fe=function(){var e=le(),t=e.data,r=e.savedData,i=e.isSaving,a=e.isDirty,u=oe();return(0,l.useEffect)((function(){!a||i||r||u("send2tg")(t.send2tg)}),[t.send2tg,a,i,r,u]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s.PluginPostStatusInfo,{children:(0,w.jsxs)("div",{style:de,children:[(0,w.jsx)(c.ToggleControl,{label:(0,w.jsxs)(w.Fragment,{children:[o("Send to Telegram"),(0,w.jsx)(ue,{})]}),checked:t.send2tg,onChange:u("send2tg")}),(0,w.jsx)(se,{})]})}),(0,w.jsx)(s.PluginPostStatusInfo,{children:(0,w.jsx)(c.ToggleControl,{disabled:!t.send2tg,label:(0,n.sprintf)("%s (%s)",o("Force send"),(0,n.sprintf)(o("Ignore %s rules."),o("Use when"))),checked:t.force_send,onChange:u("force_send")})})]})},pe=null===(F=window.wptelegram_pro)||void 0===F?void 0:F.i18n;A=pe,r=B="wptelegram-pro",a.setLocaleData(A,B),(0,e.registerPlugin)("wptelegram-pro-post-to-telegram",{icon:null,render:function(){return(0,w.jsx)(fe,{})}})}()}();
//# sourceMappingURL=wptelegram-pro--p2tg-gb.34e60e30.js.map