jQuery(function(e){c=e(".yith-wcmbs-admin-protected-link__id"),t=[],c.each(function(){t.push(parseInt(e(this).val(),10))});var i,n,t,c,l,d=Math.max.apply(null,t),o=wp.template("yith-wcmbs-admin-protected-links"),a=e(".yith-wcmbs-admin-protected-links"),s=e("#yith-wcmbs-admin-protected-links__add-link");s.on("click",function(){var t=e(o({index:++d}));t.find(".select2").remove(),t.find(".yith-wcmbs-select2").select2(),a.append(t)}),e(document).on("click",".yith-wcmbs-admin-protected-link__action__delete",function(t){e(t.target).closest(".yith-wcmbs-admin-protected-link").remove(),e(".yith-wcmbs-admin-protected-link").length||s.click()}),e(document).on("click",".yith-wcmbs-admin-protected-link__upload",function(){var t=e(this).closest(".yith-wcmbs-admin-protected-link");n=t.find(".yith-wcmbs-admin-protected-link__url-field"),i||((i=wp.media({title:yith_wcmbs_protected_links_params.i18n.uploadFileTitle,button:{text:yith_wcmbs_protected_links_params.i18n.uploadFileButtonText},multiple:!1})).on("select",function(){var t=i.state().get("selection").first().toJSON().url;n.val(t)}),i.on("ready",function(){i.uploader.options.uploader.params={type:"membership_protected_link"}})),i.open()}),c=e(".yith-wcmbs-admin-protected-link").first(),l=c.find(".yith-wcmbs-admin-protected-link__name-field"),c=c.find(".yith-wcmbs-admin-protected-link__url-field"),l&&l.val()&&c&&c.val()||(c=(l=e("#_protected-files-enabled")).closest(".yith-plugin-fw-onoff-container").find(".yith-plugin-fw-onoff"),l.is(":checked")&&c.click())});