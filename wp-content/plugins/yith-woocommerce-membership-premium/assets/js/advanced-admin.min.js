jQuery(function(d){var s={dom:{wrap:d("#yith-wcmbs-advanced-admin"),content:d("#yith-wcmbs-advanced-admin__content"),enabledToggle:d("#yith-wcmbs-advanced-admin__enabled-toggle"),fields:d("#yith-wcmbs-advanced-admin__content input, #yith-wcmbs-advanced-admin__content select"),hasEndDate:d("#has_end_date"),endDate:d("#end_date"),hasCredits:d("#has_credits"),credits:d("#credits"),creditsUpdate:d("#credits_update"),nextCreditsUpdate:d("#next_credits_update"),discountEnabled:d("#discount_enabled"),discount:d("#discount")},selectors:{setUnlimitedButton:".yith-wcmbs-advanced-set-unlimited",section:".yith-wcmbs-form-field"},init:function(){d(document).on("click",this.selectors.setUnlimitedButton,this.setUnlimitedHandler),this.dom.hasEndDate.on("change",this.hasEndDateHandler),this.hasEndDateHandler(),this.dom.hasCredits.on("change",this.hasCreditsHandler),this.hasCreditsHandler(),this.dom.discountEnabled.on("change",this.discountEnabledHandler),this.discountEnabledHandler(),this.dom.enabledToggle.on("change",this.checkEnabledDisabled),this.checkEnabledDisabled()},setUnlimitedHandler:function(e){e=d(e.target).closest(s.selectors.section).find("input").first();e&&!e.prop("disabled")&&e.val("unlimited")},checkEnabledDisabled:function(){"yes"===s.dom.enabledToggle.val()?(s.dom.fields.attr("disabled",!1),d(".yith-wcmbs-advanced-admin--show-if-enabled").slideDown()):(s.dom.fields.attr("disabled",!0),d(".yith-wcmbs-advanced-admin--show-if-enabled").slideUp())},hasEndDateHandler:function(){var e,d,t=s.dom.endDate.closest(s.selectors.section);"yes"===s.dom.hasEndDate.val()?("unlimited"===(d=s.dom.endDate.data("original-value"))&&(d=(e=new Date).getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()),s.dom.endDate.val(d),t.show()):(s.dom.endDate.data("original-value",s.dom.endDate.val()),s.dom.endDate.val("unlimited"),t.hide())},hasCreditsHandler:function(){var e,d=s.dom.credits.closest(s.selectors.section),t=s.dom.creditsUpdate.closest(s.selectors.section),n=s.dom.nextCreditsUpdate.closest(s.selectors.section);"yes"===s.dom.hasCredits.val()?(e=s.dom.credits.data("original-value"),s.dom.credits.val(e=e<0?1:e),d.show(),t.show(),n.show()):(s.dom.credits.val(-1),d.hide(),t.hide(),n.hide())},discountEnabledHandler:function(){var e=s.dom.discount.closest(s.selectors.section);"yes"===s.dom.discountEnabled.val()?e.show():e.hide()}};s.init()});