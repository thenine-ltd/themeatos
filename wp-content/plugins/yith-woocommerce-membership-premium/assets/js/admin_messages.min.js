jQuery(function(s){var a=s("#yith-wcmbs-message-to-send"),e=s("#yith-wcmbs-send-button"),t=s("#yith-wcmbs-send-message-editor"),i=0<t.length?t.data("thread-id"):0,n=0<t.length?t.data("user-id"):0,d=t.find(".spinner"),c=s("#yith-wcmbs-messages-list"),l=c.data("messages-count"),r=s("#yith-wcmbs-get-older-messages"),o=s("#get-older-spinner"),g=s("#yith-wcmbs-messages").find(".inside"),m=function(){var e=c.find("li").length;l<=e&&r.hide()},h=function(){c.length&&g.animate({scrollTop:c.outerHeight()},1e3,"swing")};e.on("click",function(){var e;i&&0<a.val().length&&(e={thread_id:i,user_id:n,message:a.val(),action:"yith_wcmbs_send_message"},d.addClass("is-active"),s.ajax({type:"POST",data:e,url:ajaxurl,success:function(e){c.append(e),a.val(""),d.removeClass("is-active"),h()}}))}),r.on("click",function(){var e=c.find("li").length,e={thread_id:i,offset:e,action:"yith_wcmbs_get_older_messages"};o.addClass("is-active"),s.ajax({type:"POST",data:e,url:ajaxurl,success:function(e){c.prepend(e),o.removeClass("is-active"),m()}})}),m(),h()});