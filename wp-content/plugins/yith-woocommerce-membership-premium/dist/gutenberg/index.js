!function(){var e={184:function(e,t){var s;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var l=typeof s;if("string"===l||"number"===l)e.push(s);else if(Array.isArray(s)){if(s.length){var n=i.apply(null,s);n&&e.push(n)}}else if("object"===l){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){e.push(s.toString());continue}for(var r in s)a.call(s,r)&&s[r]&&e.push(r)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(s=function(){return i}.apply(t,[]))||(e.exports=s)}()}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,s),l.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.blocks,t=window.wp.i18n,a=window.wp.element;const i=(0,a.createElement)("svg",null,(0,a.createElement)("path",{width:"22",height:"22",d:"M 18.24 7.628 C 17.291 8.284 16.076 8.971 14.587 9.688 C 15.344 7.186 15.765 4.851 15.849 2.684 C 15.912 0.939 15.133 0.045 13.514 0.003 C 11.558 -0.06 10.275 1.033 9.665 3.284 C 10.007 3.137 10.359 3.063 10.723 3.063 C 11.021 3.063 11.267 3.184 11.459 3.426 C 11.651 3.668 11.736 3.947 11.715 4.262 C 11.695 5.082 11.276 5.961 10.46 6.896 C 9.644 7.833 8.918 8.3 8.282 8.3 C 7.837 8.3 7.625 7.922 7.646 7.165 C 7.667 6.765 7.804 5.955 8.056 4.735 C 8.287 3.579 8.403 2.801 8.403 2.401 C 8.403 1.707 8.224 1.144 7.867 0.713 C 7.509 0.282 6.994 0.098 6.321 0.161 C 5.858 0.203 5.175 0.624 4.27 1.422 C 3.596 2.035 2.923 2.644 2.25 3.254 L 2.976 4.106 C 3.564 3.664 3.922 3.443 4.048 3.443 C 4.448 3.443 4.637 3.717 4.617 4.263 C 4.617 4.306 4.427 4.968 4.049 6.251 C 3.671 7.534 3.471 8.491 3.449 9.122 C 3.407 9.985 3.565 10.647 3.924 11.109 C 4.367 11.677 5.106 11.919 6.142 11.835 C 7.366 11.751 8.591 11.298 9.816 10.479 C 10.323 10.142 10.808 9.753 11.273 9.311 C 11.105 10.153 10.905 10.868 10.673 11.457 C 8.402 12.487 6.762 13.37 5.752 14.107 C 4.321 15.137 3.554 16.241 3.449 17.419 C 3.259 19.459 4.29 20.479 6.541 20.479 C 8.055 20.479 9.517 19.554 10.926 17.703 C 12.125 16.126 13.166 14.022 14.049 11.394 C 15.578 10.635 16.87 9.892 17.928 9.164 C 17.894 9.409 18.319 7.308 18.24 7.628 Z  M 7.393 16.095 C 7.056 16.095 6.898 15.947 6.919 15.653 C 6.961 15.106 7.908 14.38 9.759 13.476 C 8.791 15.221 8.002 16.095 7.393 16.095 Z"}));var l=window.wp.components,n=window.wp.blockEditor;function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},r.apply(this,arguments)}(0,e.registerBlockType)("yith/wcmbs-members-only-content-start",{title:(0,t._x)("Members-only content start","Block name","yith-woocommerce-membership"),icon:i,category:"yith-blocks",example:{},attributes:{alternativeContent:{type:"string",default:"default"}},edit:function(e){let{attributes:{alternativeContent:s},className:i,setAttributes:r}=e;const o=[{value:"default",label:(0,t.__)("Default","yith-woocommerce-membership")},{value:"hide",label:(0,t.__)("Hide alternative content","yith-woocommerce-membership")},...mbsBlocks.alternativeContentsOptions];return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(n.InspectorControls,null,(0,a.createElement)(l.PanelBody,null,(0,a.createElement)(l.SelectControl,{label:(0,t.__)("Alternative content to show:","yith-woocommerce-membership"),onChange:e=>r({alternativeContent:e}),value:s,options:o,__nextHasNoMarginBottom:!0,help:(0,t.__)("Hide alternative content or choose which to show in this specific block","yith-woocommerce-membership")}))),(0,a.createElement)("div",{className:i},(0,a.createElement)("span",{className:"yith-wcmbs-block-title"},(0,t._x)("Members-only content starts here","Block title","yith-woocommerce-membership"))))},save:()=>null,deprecated:[{attributes:{hideAlternativeContent:{type:"boolean",default:!1}},migrate:e=>{let{hideAlternativeContent:t}=e;return{alternativeContent:!0===t?"hide":"default"}},isEligible:e=>{let{hideAlternativeContent:t}=e;return t},save:()=>null}]});var o=window.wp.data,c=(window.wp.serverSideRender,s(184)),m=s.n(c);function h(e){let{children:s,title:n,blockProps:r,desc:c,clientId:h,className:p,showEmptyState:d}=e;const b=(0,o.useSelect)((e=>e("core/block-editor").getSelectedBlock())),u=b?.clientId===h,y=(0,o.useSelect)((e=>e("core/block-editor").hasSelectedInnerBlock(h,!0))),w=u||y;let v=[];return p=m()([p,"yith-wcmbs-block__container",{"yith-wcmbs-block--selected":w,[r?.className]:r?.className}]),r.className=p,s=Array.isArray(s)?s:[s],s.filter((e=>!!e)).forEach(((e,t)=>{e.hasOwnProperty("props")&&e.props.hasOwnProperty("className")&&e.props.className.indexOf("yith-wcmbs-block-settings-section")>-1&&!w||v.push(e)})),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",r,w?(0,a.createElement)(l.Placeholder,{icon:i,label:n,className:"yith-wcmbs-block__container"},w&&c&&(0,a.createElement)("span",{className:"yith-wcmbs-block__desc"},c),v):d?(0,a.createElement)(l.Placeholder,{icon:i,label:(0,t.__)("Membership","yith-woocommerce-membership"),className:"yith-wcmbs-block__container--empty-state"},(0,a.createElement)("span",{className:"yith-wcmbs-block__desc"},n)):v))}let p=[];Object.keys([]).forEach((e=>{p.push({label:mbsBlocks.plans[e],value:parseInt(e)})}));var d=window.wp.url,b=window.wp.apiFetch,u=s.n(b),y=window.jQuery,w=s.n(y);function v(e){let{variant:t,width:s,height:i,animation:l,sx:n,className:r}=e;n=void 0===n?{}:n;const o=[r,"yith-wcmbs-skeleton",{[`yith-wcmbs-skeleton--${t}`]:!!t,["yith-wcmbs-skeleton--animation-"+(!1===l||void 0===l?"none":l)]:-1!==["wave","none",!1].indexOf(l)}];let c={};return void 0!==s&&(c.width=s),void 0!==i&&(c.height=i),(0,a.createElement)("div",{className:m()(o),style:{...c,...n}})}const _=e=>{let{value:t,onChange:s,placeholder:i}=e;return(0,a.createElement)("input",{value:t,onChange:s,className:"yith-wcmbs-select-search",placeholder:i||""})},g=e=>{let{value:t,label:s,onRemove:i}=e;return(0,a.createElement)("div",{className:"yith-wcmbs-select__value","data-value":t,key:t},s,(0,a.createElement)("span",{className:"yith-wcmbs-select__value__remove",onClick:i}))},E=e=>{let{value:t,label:s,onClick:i,selected:l}=e;return(0,a.createElement)("div",{className:"yith-wcmbs-select-dropdown__option "+(l?"yith-wcmbs-select-dropdown__option--selected":""),onClick:i,onMouseEnter:e=>{w()(e.target).parent().find(".yith-wcmbs-select-dropdown__option--highlighted").removeClass("yith-wcmbs-select-dropdown__option--highlighted"),w()(e.target).addClass("yith-wcmbs-select-dropdown__option--highlighted")},onMouseLeave:e=>w()(e.target).removeClass("yith-wcmbs-select-dropdown__option--highlighted"),key:t,"data-value":t,role:"option","aria-selected":"false"},s)};var f=e=>{let{placeholder:s,postType:i,minimumInputLength:l,onChange:n,multiple:r=!0,value:c}=e;l=Math.max(void 0===l?3:l,1),i=i||"post";let h="";const{select:p}=(0,o.useSelect)((e=>({select:e}))),[b,y]=(0,a.useState)(!0),[f,k]=(0,a.useState)(""),[x,C]=(0,a.useState)(!1),[N,P]=(0,a.useState)(!1),[S,M]=(0,a.useState)([]),[B,T]=(0,a.useState)([]),I=(0,a.useRef)(),A=void 0===r||r,O=()=>P(!1),D=e=>{const t=w()(e.target);L({value:t.data("value"),label:t.text()})},L=e=>{if(e.hasOwnProperty("value")&&e.hasOwnProperty("label")){let t=[];A?(t=c.filter((t=>e.value!==t)),t.length===c.length?(t=[...c,e.value],T([...B,e])):T(B.filter((t=>t.value!==e.value)))):(t=e.value,T([e])),n&&n(t),k(""),M([]),P(!1)}},R=e=>{if(A){const t=w()(e.target).closest(".yith-wcmbs-select__value"),s=Math.abs(t.data("value"));L({value:s,label:""})}else n(0),T([])},j=["yith-wcmbs-select",{"yith-wcmbs-select--loading":x,"yith-wcmbs-select--selected":N,"yith-wcmbs-select--multiple":A}],z={basePath:{post:"/wp/v2/posts","yith-wcmbs-plan":"/wp/v2/yith-membership-plans","ywcmbs-alt-cont":"/wp/v2/ywcmbs-alt-cont",product:"/wc/store/products",page:"/wp/v2/pages"},getQueryArgs:()=>{let e={search:f,_fields:"id,title"};return"product"===i&&(e._fields="id,name"),e},searchOptions:async()=>{C(!0);const e=(0,d.addQueryArgs)(z.basePath[z.basePath?.[i]?i:"post"],z.getQueryArgs());p("core").getEntityRecords("postType",i,{search:f}),await u()({path:e}).then((e=>{C(!1),M(z.postsToOptions(e))})).catch((e=>console.log(e)))},postsToOptions:e=>{const t=[];return Array.isArray(e)&&e.forEach((e=>{let s={};s="product"===i?{value:e.id,label:e?.name?e.name:""}:{value:e.id,label:e?.title?.rendered?e?.title?.rendered:""},s.hasOwnProperty("label")&&s.hasOwnProperty("value")&&t.push(s)})),t}},H=(0,t.sprintf)((0,t.__)("Please enter %d or more characters","yith-woocommerce-membership"),l-f.length),U=A?B.length:Object.keys(B).length,F=e=>{M([]),P(!0),k(e.target.value)};return f.length-l<0?h=H:x?h=(0,t.__)("Searching...","yith-woocommerce-membership"):S?.length||(h=(0,t.__)("No results found","yith-woocommerce-membership")),(0,a.useEffect)((()=>{if(document.addEventListener("click",O),A?c.length:c){const e=A?c.join(","):c;u()({path:(0,d.addQueryArgs)(z.basePath[i],{include:e})}).then((e=>{y(!1),T(e.map((e=>({value:e.id,label:e.title.rendered}))))}))}else y(!1);return()=>document.removeEventListener("click",O)}),[]),(0,a.useEffect)((()=>{f.length>=l&&z.searchOptions()}),[f]),(0,a.createElement)("div",{className:m()(j),onClick:e=>{const t=w()(e.target),s=t.hasClass("yith-wcmbs-search-bar")?t:t.closest(".yith-wcmbs-search-bar");if(s.length&&(P(!0),!A)){const e=s.closest(".yith-wcmbs-select");e.length&&(e.addClass("yith-wcmbs-select--selected"),e.find("input.yith-wcmbs-select-search").focus())}e.stopPropagation()},onKeyDownCapture:e=>{if(N&&S?.length)switch(e.key){case"Enter":{const e=w()(I.current),t=e.find(".yith-wcmbs-select-dropdown__option--highlighted");t.length?L({value:t.data("value"),label:t.text()}):e.find(".yith-wcmbs-select-dropdown__option").first().addClass("yith-wcmbs-select-dropdown__option--highlighted")}break;case"ArrowUp":case"ArrowDown":{e.stopPropagation();const t=w()(I.current),s=t.find(".yith-wcmbs-select-dropdown__option--highlighted");if(s.length){const t="ArrowDown"===e.key?s.next():s.prev(),a=t.is(".yith-wcmbs-select-dropdown__option"),i=t.closest(".yith-wcmbs-select-dropdown-options");if(a){if(i){const e=i[0],s=t[0].getBoundingClientRect(),a=e.getBoundingClientRect();if(s.y<a.y||s.y+s.height>a.y+a.height){const t=s.y<a.y?s.y-a.y:s.y+s.height-(a.y+a.height);e.scroll({top:e.scrollTop+t,behavior:"smooth"})}}i.find(".yith-wcmbs-select-dropdown__option--highlighted").removeClass("yith-wcmbs-select-dropdown__option--highlighted"),t.addClass("yith-wcmbs-select-dropdown__option--highlighted").attr("aria-selected","true")}}else t.find(".yith-wcmbs-select-dropdown__option").first().addClass("yith-wcmbs-select-dropdown__option--highlighted")}break;case"Tab":O()}},ref:I},b?(0,a.createElement)(v,{variant:"rounded",width:"300px",height:"40px",animation:"wave"}):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"yith-wcmbs-search-bar"},A||U||!s?"":(0,a.createElement)("div",{className:"yith-wcmbs-search-bar__placeholder"},s),Array.isArray(c)?B.map((e=>(0,a.createElement)(g,{label:e.label,value:e.value,key:e.value,onRemove:R}))):c&&B.length&&B[0].hasOwnProperty("value")?(0,a.createElement)(g,{label:B[0].label,value:B[0].value,onRemove:R}):"",A&&(0,a.createElement)(_,{value:f,placeholder:U?"":s,onChange:F})),(0,a.createElement)("div",{className:"yith-wcmbs-select-dropdown"},!A&&(0,a.createElement)(_,{value:f,onChange:F}),h&&(0,a.createElement)("div",{className:"yith-wcmbs-select-dropdown__message"},h),(0,a.createElement)("div",{className:"yith-wcmbs-select-dropdown-options"},S?.length&&N&&!x?S.map((e=>(0,a.createElement)(E,{onClick:D,selected:Array.isArray(c)?-1!==c.indexOf(e.value):e.value===c,label:e.label,value:e.value,key:e.value}))):""))))};function k(e){let{className:t,title:s,attributes:i,context:l,block:n,loadingState:r,emptyState:o,onRender:c}=e;const h=(0,a.useRef)(),[p,b]=(0,a.useState)(!1),[u,y]=(0,a.useState)(!1),w=(0,d.addQueryArgs)(mbsBlocks.siteURL,{"yith-wcmbs-block-preview":1,"yith-wcmbs-block-preview-nonce":mbsBlocks.previewNonce,attributes:i,context:l,block:n}),v=m()("yith-wcmbs-blocks__edit-preview-iframe",t);return(0,a.useEffect)((()=>{if(!h||!h.current||!p)return;const e=h.current,t=()=>{const e=h.current,t=Math.max(e.contentDocument.documentElement.offsetHeight,e.contentDocument.body.offsetHeight);e.style.height=`${t}px`},{IntersectionObserver:s,ResizeObserver:a}=e.ownerDocument.defaultView,i=new s((e=>{let[s]=e;s.isIntersecting&&t()}),{threshold:1});i.observe(e);const l=!!a&&new a((()=>t()));return l&&l.observe(e),e.addEventListener("load",t),()=>{i.disconnect(),l&&l.disconnect(),e.removeEventListener("load",t)}}),[p]),(0,a.useEffect)((()=>{b(!1)}),[w]),(0,a.createElement)(a.Fragment,null,!(!p&&r)||("function"==typeof r?r():r),!(p&&u&&o)||("function"==typeof o?o():o),(0,a.createElement)("iframe",{ref:h,className:v,title:s,src:w,onLoad:e=>{e.target.contentDocument.body.style.overflow="hidden","function"==typeof c&&c(e),o&&y(!e.target.contentDocument.body.innerHTML),b(!0)},height:100,style:{display:!p&&r||p&&u?"none":""}}))}k.defaultProps={className:"",attributes:{},context:{}};var x=k;const C=function(){return(0,a.createElement)("div",{style:{display:"flex",gap:"10px"}},(0,a.createElement)(v,{variant:"circular",width:"120px",height:"40px",animation:"wave"}),(0,a.createElement)(v,{variant:"circular",width:"150px",height:"40px",animation:"wave"}),(0,a.createElement)(v,{variant:"circular",width:"130px",height:"40px",animation:"wave"}))};var N=(0,o.withSelect)((e=>({currentPostId:e("core/editor").getCurrentPostId()})))((e=>{const{attributes:s,setAttributes:i,currentPostId:o}=e,{linkClass:c,postType:m,postID:p}=s,[d,b]=(0,a.useState)(!(p||"current-post"===m)),u=(0,n.useBlockProps)(),y=[{value:"current-post",label:(0,t.__)("Current post","yith-woocommerce-membership")},{value:"post",label:(0,t.__)("Post","yith-woocommerce-membership")},{value:"page",label:(0,t.__)("Page","yith-woocommerce-membership")},{value:"product",label:(0,t.__)("Product","yith-woocommerce-membership")}];return(0,a.createElement)(h,r({title:(0,t.__)("Membership Protected Links","yith-woocommerce-membership"),desc:(0,t.__)("Print the protected links set into a post, page, or product","yith-woocommerce-membership"),blockProps:u,showEmptyState:d},e,{className:"yith-plugin-ui"}),!(p||"current-post"===m)||(0,a.createElement)(l.Disabled,null,(0,a.createElement)(x,{attributes:{...s,currentPostId:o},block:"membership-protected-links",loadingState:C,onRender:e=>{b(!e.target.contentDocument.body.innerHTML)},emptyState:(0,a.createElement)("span",{className:"yith-wcmbs-membership-block--empty-message"},(0,t.__)("The selected post has no secure links","yith-woocommerce-membership"))})),(0,a.createElement)(n.InspectorControls,null,(0,a.createElement)(l.PanelBody,{title:(0,t.__)("Membership","yith-woocommerce-membership")},(0,a.createElement)(l.TextControl,{label:(0,t.__)("Link class","yith-woocommerce-membership"),value:c,onChange:e=>i({linkClass:e})}))),(0,a.createElement)("div",{className:"yith-wcmbs-block-settings-section"},(0,a.createElement)("span",{className:"yith-wcmbs-block-settings__label"},(0,t.__)("Print protected links set into:","yith-woocommerce-membership")),(0,a.createElement)("div",{className:"yith-wcmbs-block-settings__fields"},(0,a.createElement)("select",{onChange:e=>{i({postType:e.target.value,postID:0})},value:m,style:{width:"300px"}},y.map((e=>(0,a.createElement)("option",{value:e.value,key:e.value},e.label)))),"current-post"!==m&&(0,a.createElement)(f,{value:p,multiple:!1,onChange:e=>i({postID:e||0}),postType:m}))))}));(0,e.registerBlockType)("yith/wcmbs-membership-protected-links",{title:(0,t._x)("Membership protected links","Block name","yith-woocommerce-membership"),icon:i,category:"yith-blocks",example:{},attributes:{postType:{type:"string",default:"current-post"},postID:{type:"number",default:0},linkClass:{type:"string",default:""}},edit:N}),(0,e.registerBlockType)("yith/wcmbs-membership-protected-content",{title:(0,t._x)("Membership protected content","Block name","yith-woocommerce-membership"),icon:i,category:"yith-blocks",example:{},attributes:{user:{type:"string",default:"guest"},plans:{type:"array",default:[]}},edit:function(e){const{attributes:s,setAttributes:i,clientId:l}=e,{user:c,plans:m}=s,p=[{value:"guest",label:(0,t.__)("Guest","yith-woocommerce-membership")},{value:"member",label:(0,t.__)("Member","yith-woocommerce-membership")},{value:"non-member",label:(0,t.__)("Non-member","yith-woocommerce-membership")}],d=(0,n.useBlockProps)(),b=(0,o.useSelect)((t=>t("core/block-editor").getBlockCount(e.clientId))),u=["member","non-member"].includes(c);return(0,a.createElement)(h,r({blockProps:d,title:(0,t.__)("Membership Protected Content","yith-woocommerce-membership"),desc:(0,t.__)("Show specific content based on the membership plans","yith-woocommerce-membership"),showEmptyState:!b},e,{className:"yith-plugin-ui"}),(0,a.createElement)(n.InnerBlocks,{renderAppender:!b&&n.InnerBlocks.ButtonBlockAppender}),(0,a.createElement)("div",{className:"yith-wcmbs-block-settings-section"},(0,a.createElement)("span",{className:"yith-wcmbs-block-settings__label"},(0,t.__)("Users that can see this block content:","yith-woocommerce-membership")),(0,a.createElement)("div",{className:"yith-wcmbs-block-settings__options"},(0,a.createElement)("select",{onChange:e=>{return t=e.target.value,i({user:null===t?"guest":t});var t},value:c},p.map((e=>(0,a.createElement)("option",{value:e.value,key:e.value},e.label)))),u&&(0,a.createElement)(f,{value:null!=m?m:[],onChange:e=>{i({plans:null===e?[]:e})},postType:"yith-wcmbs-plan",placeholder:(0,t.__)("Search Membership Plans","yith-woocommerce-membership")}))))},save:e=>{let{attributes:t}=e;const s=n.useBlockProps.save(),{content:i}=t;return(0,a.createElement)("div",s,(0,a.createElement)(n.InnerBlocks.Content,null))}});const P=e=>{let{media:t}=e,s="",i=!0;if(t){const e=t?.mime_type?t.mime_type:"",a=e.substring(0,e.indexOf("/"));s=mbsBlocks.mediaIcons.hasOwnProperty(a)?mbsBlocks.mediaIcons[a]:mbsBlocks.mediaIcons.document,"image"===a&&(i=!1,s=t.source_url)}return(0,a.createElement)("div",{className:"yith-wcmbs-protected-media-settings__preview-cover "+(i?"yith-wcmbs-protected-media-settings__preview-cover--icon":"")},s&&(0,a.createElement)("img",{src:s,alt:t?.alt_text}))},S=()=>(0,a.createElement)("div",{className:"yith-wcmbs-protected-media-settings yith-wcmbs-protected-media-settings--skeleton"},(0,a.createElement)("div",{className:"yith-wcmbs-protected-media-settings__preview",style:{borderColor:"#0000",gap:"5px"}},(0,a.createElement)(v,{width:"150px",height:"150px"}),(0,a.createElement)(v,{variant:"text",sx:{fontSize:"0.9em"}})),(0,a.createElement)("div",{className:"yith-wcmbs-protected-media-settings__options",style:{display:"flex",flexDirection:"column",gap:"10px"}},(0,a.createElement)(v,{variant:"text",sx:{fontSize:"11px"},width:"60px"}),(0,a.createElement)(v,{variant:"rounded",width:"225px",height:"30px"}),(0,a.createElement)(v,{variant:"text",sx:{fontSize:"0.9em"},width:"120px"}),(0,a.createElement)(v,{variant:"text",sx:{fontSize:"11px"},width:"70px"}),(0,a.createElement)(v,{variant:"rounded",width:"225px",height:"30px"})));var M=(0,o.withSelect)(((e,t)=>({media:e("core").getMedia(Math.abs(t.attributes.mediaId))})))((e=>{let{media:s}=e;const{attributes:i,setAttributes:o,clientId:c}=e,{mediaId:m,mediaUrl:p,linkedText:d}=i,b=(0,n.useBlockProps)(),u=e=>{o({mediaId:e.id,linkedText:e.filename})},y=e=>{let{open:i}=e;return s?(0,a.createElement)("a",{href:"#",className:"yith-wcmbs-protected-open-media-library-handle",onClick:i},(0,t.__)("Open Media Library","yith-woocommerce-membership")):(0,a.createElement)(l.Button,{className:"editor-post-featured-image__toggle yith-plugin-fw__button--primary yith-plugin-fw__button--xl yith-wcmbs-media-library-button",onClick:i},(0,t.__)("Open Media Library","yith-woocommerce-membership"))};return void 0===s&&(s=!1),(0,a.createElement)(h,r({blockProps:b,title:(0,t.__)("Membership Protected Media","yith-woocommerce-membership"),desc:(0,t.__)("Print protected media link. Please note: media should be set as protected before printing the link","yith-woocommerce-membership"),showEmptyState:!m},e,{className:"yith-plugin-ui "+e?.className}),!!m&&(0,a.createElement)(l.Disabled,null,(0,a.createElement)("a",{href:"#"},d||s?.title?.rendered)),(0,a.createElement)("div",{className:"yith-wcmbs-block-settings-section"},!m&&(0,a.createElement)(n.MediaUploadCheck,null,(0,a.createElement)(n.MediaUpload,{onSelect:u,value:m,render:y})),!m||(s?(0,a.createElement)("div",{className:"yith-wcmbs-protected-media-settings"},(0,a.createElement)("div",{className:"yith-wcmbs-protected-media-settings__preview"},(0,a.createElement)(P,{media:s}),(0,a.createElement)("div",{className:"yith-wcmbs-protected-media-settings__preview-info",title:s?.title?.rendered},s?.title?.rendered)),(0,a.createElement)("div",{className:"yith-wcmbs-protected-media-settings__options"},(0,a.createElement)(l.TextControl,{label:(0,t.__)("Media URL","yith-woocommerce-membership"),value:s.source_url,onChange:()=>{}}),(0,a.createElement)(n.MediaUploadCheck,null,(0,a.createElement)(n.MediaUpload,{onSelect:u,value:m,render:y})),(0,a.createElement)(l.TextControl,{label:(0,t.__)("Linked text","yith-woocommerce-membership"),value:d||s?.title?.rendered,onChange:e=>o({linkedText:e})}))):(0,a.createElement)(S,null))))}));(0,e.registerBlockType)("yith/wcmbs-membership-protected-media",{title:(0,t._x)("Membership protected media","Block name","yith-woocommerce-membership"),icon:i,category:"yith-blocks",example:{},attributes:{mediaId:{type:"number",default:0},linkedText:{type:"string",default:""}},edit:M});const B=(0,o.withSelect)(((e,t)=>-1===t.planId?{plans:e("core").getEntityRecords("postType","yith-wcmbs-plan",{per_page:3})}:{plans:[e("core").getEntityRecord("postType","yith-wcmbs-plan",t.planId)]}))((e=>{let{plans:s}=e;return(0,a.createElement)(a.Fragment,null,!Array.isArray(s)||s.map((e=>(0,a.createElement)("div",{className:"yith-wcmbs-my-account-accordion",key:"yith-membership-history-skeleton-"+e?.id},e?(0,a.createElement)("h3",null,e?.title?.rendered):(0,a.createElement)(v,{variant:"text",width:"150px",sx:{fontSize:"16px",margin:"15px 20px 15px 10px"}}),(0,a.createElement)("div",{className:"yith-wcmbs-my-account-membership-container"},(0,a.createElement)("div",{className:"yith-wcmbs-membership-details"},(0,a.createElement)("div",{className:"yith-wcmbs-membership-detail"},(0,a.createElement)("div",{className:"yith-wcmbs-membership-detail__title"},(0,t.__)("Starting date","yith-woocommerce-membership")),(0,a.createElement)(v,{variant:"text",sx:{fontSize:"13px"},animation:"none"})),(0,a.createElement)("div",{className:"yith-wcmbs-membership-detail"},(0,a.createElement)("div",{className:"yith-wcmbs-membership-detail__title"},(0,t.__)("Expiration Date","yith-woocommerce-membership")),(0,a.createElement)(v,{variant:"text",sx:{fontSize:"13px"},animation:"none"})),(0,a.createElement)("div",{className:"yith-wcmbs-membership-detail"},(0,a.createElement)("div",{className:"yith-wcmbs-membership-detail__title"},(0,t.__)("Status","yith-woocommerce-membership")),(0,a.createElement)(v,{variant:"text",sx:{fontSize:"13px"},animation:"none"}))),(0,a.createElement)(v,{height:"50px",animation:"none",sx:{margin:"20px"}}))))))}));(0,e.registerBlockType)("yith/wcmbs-membership-history",{apiVersion:2,title:(0,t._x)("Membership history","Block name","yith-woocommerce-membership"),icon:i,category:"yith-blocks",example:{},attributs:{id:{type:"number",default:0},emptyStateMessage:{type:"string",default:""},plansToPrint:{type:"string",default:"all",enum:["all","specific"]},type:{type:"string",default:"",enum:["","membership","subscription"]}},edit:function(e){const{attributes:s,setAttributes:i}=e,{id:o,plansToPrint:c,noMembershipMessage:m,type:p}=s,d=(0,n.useBlockProps)(),b=[{value:"",label:(0,t.__)("All memberships","yith-woocommerce-membership")},{value:"membership",label:(0,t.__)("Only memberships not associated with a subscription plan","yith-woocommerce-membership")},{value:"subscription",label:(0,t.__)("Only memberships associated with a subscription plan","yith-woocommerce-membership")}],u=[{value:"all",label:(0,t.__)("All memberships","yith-woocommerce-membership")},{value:"specific",label:(0,t.__)("Choose a specific plan","yith-woocommerce-membership")}];return(0,a.createElement)(h,r({title:(0,t.__)("Membership History","yith-woocommerce-membership"),desc:(0,t.__)("Print the details of the membership plans joined by the current user","yith-woocommerce-membership"),className:"yith-plugin-ui",blockProps:d},e,{showEmptyState:"specific"===c&&!o}),!("all"===c||o)||(0,a.createElement)(B,{planId:"all"===c?-1:o}),!mbsBlocks?.isSubscriptionPluginActive||(0,a.createElement)(n.InspectorControls,null,(0,a.createElement)(l.PanelBody,{title:(0,t.__)("Membership","yith-woocommerce-membership")},(0,a.createElement)(l.RadioControl,{label:(0,t.__)("Show","yith-woocommerce-membership"),selected:p,options:b,onChange:e=>i({type:e}),className:"yith-wcmbs-radio-control-container"}))),(0,a.createElement)("div",{className:"yith-wcmbs-block-settings-section"},(0,a.createElement)("div",{className:"yith-wcmbs-block-settings__field"},(0,a.createElement)("label",{className:"yith-wcmbs-block-settings__field-label"},(0,t.__)("Membership plans to print:","yith-woocommerce-membership")),(0,a.createElement)("select",{onChange:e=>(e=>{let t={plansToPrint:e};"all"===c&&(t.id=0),i(t)})(e.target.value),value:c},u.map((e=>(0,a.createElement)("option",{value:e.value,key:e.value},e.label)))),"specific"!==c||(0,a.createElement)(f,{value:o,onChange:e=>i({id:e}),postType:"yith-wcmbs-plan",multiple:!1})),(0,a.createElement)("div",{className:"yith-wcmbs-block-settings__field"},(0,a.createElement)("label",{className:"yith-wcmbs-block-settings__field-label"},(0,t.__)("Text to show to customers without a membership:","yith-woocommerce-membership")),(0,a.createElement)("input",{type:"text",className:"yith-wcmbs-membershp-history-empty-message-field",value:m,onChange:e=>i({noMembershipMessage:e.target.value})}))))}});const T=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(v,{variant:"text",width:"120px",sx:{fontSize:"0.9em",margin:"15px 0"}}),(0,a.createElement)(v,{height:"50px"}),(0,a.createElement)(v,{variant:"text",width:"100px",sx:{fontSize:"0.9em",margin:"40px 0 15px 0"}}),(0,a.createElement)(v,{height:"50px"}));(0,e.registerBlockType)("yith/wcmbs-membership-items",{apiVersion:2,title:(0,t._x)("Membership items","Block name","yith-woocommerce-membership"),icon:i,category:"yith-blocks",example:{},attributes:{order:{type:"string",default:"DESC"},orderby:{type:"string",default:"ID"},plan:{type:"number",default:0}},edit:function(e){const{attributes:s,setAttributes:i}=e,{plan:o}=s,[c,m]=(0,a.useState)(!o),p=(0,n.useBlockProps)();return(0,a.createElement)(h,r({title:(0,t.__)("Membership Plan Items","yith-woocommerce-membership"),desc:(0,t.__)("Print the list of items included in a membership plan","yith-woocommerce-membership"),blockProps:p,showEmptyState:c},e),!o||(0,a.createElement)(l.Disabled,null,(0,a.createElement)(x,{attributes:s,block:"membership-items",loadingState:T,onRender:e=>{m(!e.target.contentDocument.body.innerHTML)},emptyState:(0,a.createElement)("span",{className:"yith-wcmbs-membership-block--empty-message"},(0,t.__)("There are no items to show for the selected plan","yith-woocommerce-membership"))})),(0,a.createElement)("div",{className:"yith-wcmbs-block-settings-section"},(0,a.createElement)("span",{className:"yith-wcmbs-block-settings__label"},(0,t.__)("Print items included in plan:","yith-woocommerce-membership")),(0,a.createElement)(f,{value:o,onChange:e=>i({plan:e}),postType:"yith-wcmbs-plan",multiple:!1})))}}),(0,e.registerBlockType)("yith/wcmbs-membership-downloaded-product-links",{apiVersion:2,title:(0,t._x)("Membership downloaded product links","Block name","yith-woocommerce-membership"),icon:i,category:"yith-blocks",example:{},edit:function(e){const s=(0,n.useBlockProps)();return(0,a.createElement)(h,r({title:(0,t.__)("Membership Downloaded Product Links","yith-woocommerce-membership"),desc:(0,t.__)("Print a table with links to downloaded products","yith-woocommerce-membership"),blockProps:s},e),(0,a.createElement)("table",{className:"yith-wcmbs-membership-table"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",{className:"yith-wcmbs-membership-table-title"},(0,t.__)("Product","yith-woocommerce-membership")),(0,a.createElement)("th",{className:"yith-wcmbs-membership-table-download"},(0,t.__)("Download","yith-woocommerce-membership")))),(0,a.createElement)("tbody",null,(0,a.createElement)("tr",null,(0,a.createElement)("td",{className:"yith-wcmbs-membership-table-title"},(0,a.createElement)(v,{variant:"text",width:"150px",animation:"none"})),(0,a.createElement)("td",{className:"yith-wcmbs-membership-table-download"},(0,a.createElement)("a",{href:"#",className:"yith-wcmbs-product-download-button"},(0,t.__)("Download","yith-woocommerce-membership")))),(0,a.createElement)("tr",null,(0,a.createElement)("td",{className:"yith-wcmbs-membership-table-title"},(0,a.createElement)(v,{variant:"text",width:"250px",animation:"none"})),(0,a.createElement)("td",{className:"yith-wcmbs-membership-table-download"},(0,a.createElement)("a",{href:"#",className:"yith-wcmbs-product-download-button unlocked"},(0,t.__)("Download","yith-woocommerce-membership")))))))}})}()}();